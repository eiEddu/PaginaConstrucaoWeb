<div class="container mt-2">
  <a class="btn-voltar-home mb-3" routerLink="/">
    <span class="btn-voltar-home-icone">üè†</span>
    <span class="btn-voltar-home-texto">Voltar para a Home</span>
  </a>
</div>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Atividades</h2>
    <a class="btn btn-success" routerLink="/atividades/cadastrar">+ Nova Atividade</a>
  </div>

  <!-- Filtros -->
  <div class="card p-3 mb-3">
    <div class="row g-3 align-items-end">
      <div class="col-md-6">
        <label class="form-label">Status</label>
        <select class="form-select" [(ngModel)]="filtroStatus" (change)="aplicarFiltros()">
          <option *ngFor="let s of statusOptions" [ngValue]="s">{{ s }}</option>
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">Categoria</label>
        <select class="form-select" [(ngModel)]="filtroCategoria" (change)="aplicarFiltros()">
          <option *ngFor="let c of categoriaOptions" [ngValue]="c">{{ c }}</option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="carregando">Carregando...</div>

  <table class="table table-striped table-hover" *ngIf="!carregando && filtradas.length > 0">
    <thead>
      <tr>
        <th>Descri√ß√£o</th>
        <th>Categoria</th>
        <th>Status</th>
        <th>In√≠cio</th>
        <th>Fim</th>
        <th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let a of filtradas">
        <td>{{ a.descricao }}</td>
        <td>{{ a.categoria }}</td>
        <td><span [class]="badgeClass(a.status)">{{ a.status }}</span></td>
        <td>{{ a.dataInicio }}</td>
        <td>{{ a.dataFim || '-' }}</td>

        <td class="d-flex gap-2">
          <a class="btn btn-sm btn-primary d-inline-flex align-items-center justify-content-center" [routerLink]="['/atividades/editar', a.id]">Editar</a>
          <button class="btn btn-sm btn-danger" (click)="excluir(a)">Excluir</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="alert alert-info" *ngIf="!carregando && filtradas.length === 0">
    Nenhuma atividade encontrada com os filtros selecionados.
  </div>
</div>
